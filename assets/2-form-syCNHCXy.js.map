{"version":3,"file":"2-form-syCNHCXy.js","sources":["../../src/js/2-form.js"],"sourcesContent":["const feedbackForm = document.querySelector('.feedback-form');\nconst emailInput = feedbackForm.elements.email;\nconst messageInput = feedbackForm.elements.message;\nconst localStorageKey = 'feedback-form-state';\nconst maxCount = 400;\nconst regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\nconst errorMessage = document.getElementById('email-error');\nconst chek = document.querySelector('.chek');\nconst countNumber = document.getElementById('countNumber');\nconst messageCounter = document.querySelector('.message-counter');\nconst stopRegex = /[^a-zA-Z0-9._@-]/g;\n\nlet formData = {\n  email: '',\n  message: '',\n};\n\n// –ü–∞—Ä—Å–∏–º–æ –ª–æ–∫–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ –∑ –ø–æ—Ç—Ä—ñ–±–Ω–∏–º –Ω–∞–º –∫–ª—é—á–µ–º —ñ –≤–∏—Ç—è–≥—É—î–º –∑ –Ω—å–æ–≥–æ –¥–∞–Ω—ñ –≤ FormData\nconst savedData = JSON.parse(localStorage.getItem(localStorageKey)) || {};\nformData = {\n  email: savedData.email || '',\n  message: savedData.message || '',\n};\n//console.log('üöÄ ~ formData:', formData);\n\n// –∑–∞–ø–æ–≤–Ω—é—î–º–æ –¥–∞–Ω—ñ –ø–æ–ª—ñ–≤ –≤–≤–æ–¥—É\nemailInput.value = formData.email;\nmessageInput.value = formData.message;\nif (emailInput.value) {\n  validateEmail(emailInput);\n}\n\nif (messageInput.value) {\n  counterNumber(messageInput);\n}\n\n//–î–æ–¥–∞—î–º–æ —Å–ª—É—Ö–∞—á–∞ –Ω–∞ input —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –¥–µ–ª–µ–≥—É–≤–∞–Ω–Ω—è –≤—ñ—à–∞—î–º –π–æ–≥–æ –Ω–∞ —Ñ–æ—Ä–º—É\nfeedbackForm.addEventListener('input', saveToLocalStr);\n\nfunction saveToLocalStr(event) {\n  // –∑–∞–ø–∏—Å—É—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è —ñ–Ω–ø—É—Ç –≤ formData, –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å–æ–º –ø–æ–∑–±—É–≤–∞—î–º–æ—Å—è –ª–∏—à–Ω—ñ—Ö –∑–Ω–∞–∫—ñ–≤ —Ç–∞–±—É–ª—è—Ü—ñ—ó(–ø—Ä–æ–±—ñ–ª —ñ –µ–Ω—Ç–µ—Ä)\n  formData[event.target.name] = event.target.value.trim();\n\n  validateEmail(emailInput);\n  counterNumber(messageInput);\n\n  // –∑–∞–ø–∏—Å—É—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è formData –ª–æ–∫–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ\n  localStorage.setItem(localStorageKey, JSON.stringify(formData));\n}\n\n// –î–æ–¥–∞—î–º–æ —Å–ª—É—Ö–∞—á–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É submit, –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –ø—É—Å—Ç—ñ –ø–æ–ª—è, —è–∫—â–æ –≤—Å–µ –æ–∫: –≤–∏–≤–æ–¥–∏–º–æ –¥–∞–Ω—ñ –≤ –∫–æ–Ω—Å–æ–ª—å —ñ –≤—Å–µ –æ—á–∏—â—É—î–º–æ\nfeedbackForm.addEventListener('submit', event => {\n  event.preventDefault();\n  if (!formData.email || !formData.message) {\n    return alert('Fill please all fields');\n  }\n  console.log('formData:', formData);\n  localStorage.removeItem(localStorageKey);\n  formData.email = '';\n  formData.message = '';\n  feedbackForm.reset();\n  counterNumber(messageInput);\n  countNumber.textContent = `0/${maxCount}`;\n  messageCounter.classList.add('hidden');\n});\n\n// –ø—Ä–æ–≤–æ–¥–∏–º–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –≤–≤–µ–¥–µ–Ω–æ–≥–æ –µ–º–∞–π–ª\nfunction validateEmail(emailInput) {\n  let email = emailInput.value;\n  // –¥–æ–¥–∞—î–º–æ –∑–∞–±–æ—Ä–æ–Ω—É –≤–≤–æ–¥—É –∫–∏—Ä–∏–ª–µ—Ü–µ—é. —Ç–∞ –∑–Ω–∞–∫—ñ–≤ —Ç–∞–±—É–ª—è—Ü—ñ—ó\n  emailInput.value = email.replace(stopRegex, '');\n  if (stopRegex.test(email)) {\n    chek.classList.add('hidden');\n    errorMessage.classList.add('error-message');\n    errorMessage.textContent =\n          '‚ùó –ë—É–¥—å –ª–∞—Å–∫–∞ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–∏—Ä–∏–ª–∏—Ü—é —á–∏ —Ç–∞–±—É–ª—è—Ü—ñ—é –ø—Ä–∏ –≤–≤–æ–¥—ñ!';\n      \n    return;\n  }\n  if (!email) {\n    emailInput.classList.remove('error');\n    errorMessage.classList.remove('error-message');\n    errorMessage.textContent = '';\n      return;\n  }\n  if (!regex.test(email)) {\n    console.log('üöÄ ~ validateEmail ~ !regex.test(email):', !regex.test(email));\n    chek.classList.add('hidden');\n    emailInput.classList.add('error');\n    errorMessage.classList.add('error-message');\n    errorMessage.textContent =\n      '‚ùó –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∏–π –∞–±–æ –Ω–µ–ø–æ–≤–Ω–∏–π email! –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –≤–≤–æ–¥—É!';\n  } else {\n    emailInput.classList.remove('error');\n    errorMessage.classList.remove('error-message');\n    errorMessage.textContent = '';\n    chek.classList.remove('hidden');\n    \n  }\n}\n\n// –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–∏–º–æ–ª—ñ–≤ —ñ –≤–∏–≤–æ–¥–∏–º–æ —ñ–Ω—Ñ–æ\nfunction counterNumber(messageInput) {\n  const message = messageInput.value;\n  const currentLength = message.length;\n  countNumber.textContent = `${currentLength}/${maxCount}`;\n  const avalibleLength = maxCount - currentLength;\n  if (currentLength > maxCount * 0.9) {\n    messageCounter.classList.remove('hidden');\n\n    if (currentLength >= maxCount) {\n      messageCounter.innerHTML = `‚ùó –í–∏ –¥–æ—Å—è–≥–ª–∏ –ª—ñ–º—ñ—Ç—É –≤ ${maxCount} —Å–∏–º–≤–æ–ª—ñ–≤. –Ø–∫—â–æ –º–∞—î—Ç–µ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó, –Ω–∞–¥—ñ—à–ª—ñ—Ç—å —ó—Ö –Ω–∞  \n   <a href=\"mailto:info@goit.ua\">info@goit.ua</a>.`;\n      messageCounter.style.bottom = '2px';\n    } else {\n      messageCounter.textContent = `‚ö† –£ –í–∞—Å –∑–∞–ª–∏—à–∏–ª–æ—Å—è –¥–æ—Å—Ç—É–ø–Ω–∏—Ö ${avalibleLength} —Å–∏–º–≤–æ–ª—ñ–≤`;\n      messageCounter.style.bottom = '20px';\n    }\n  } else {\n    messageCounter.classList.add('hidden');\n  }\n}\n\n//–∑–∞–±–æ—Ä–æ–Ω—è—î–º–æ –Ω–∞–±—ñ—Ä —Ç–µ–∫—Å—Ç—É, –∫–æ–ª–∏ –¥–æ—Å—è–≥–Ω—É—Ç–æ –º–∞–∫–∏–º–∞–ª—å–Ω–æ—Ö –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç–µ–∫—Å—Ç—É\nfeedbackForm.addEventListener('keydown', stopInputMsg);\n\nfunction stopInputMsg(event) {\n  console.log(\n    'üöÄ ~ stopInputMsg ~ event.target.tagName:',\n    event.target.tagName\n  );\n  if (event.target.tagName.toLowerCase() !== 'textarea') {\n    return;\n  }\n  if (\n    event.target.value.length >= maxCount &&\n    event.key !== 'Delete' &&\n    event.code !== 'Backspace' &&\n    event.code !== 'ArrowRight' &&\n    event.code !== 'ArrowLeft' &&\n    event.code !== 'ArrowUp' &&\n    event.code !== 'ArrowDown'\n  ) {\n    event.preventDefault();\n  }\n}\n\n//–î–æ–∑–æ–ª—è—î–º–æ –≤—Å—Ç–∞–≤–∫—É —Ç—ñ–ª—å–∫–∏ —Ç–µ–∫—Å—Ç—É –∑ –¥–æ—Å—Ç—É–ø–Ω–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é —Å–∏–º–≤–æ–ª—ñ–≤\nmessageInput.addEventListener('paste', cutPaste);\n\nfunction cutPaste(event) {\n  event.preventDefault();\n  const message = event.target.value;\n  const availableLength = maxCount - message.length;\n  const pasteText = event.clipboardData.getData('text');\n  const cutPasteMessage = pasteText.substring(0, availableLength);\n  event.target.value = message + cutPasteMessage;\n  counterNumber(event.target);\n  saveToLocalStr(event);\n}\n"],"names":["feedbackForm","emailInput","messageInput","localStorageKey","maxCount","regex","errorMessage","chek","countNumber","messageCounter","stopRegex","formData","savedData","validateEmail","counterNumber","saveToLocalStr","event","email","currentLength","avalibleLength","stopInputMsg","cutPaste","message","availableLength","cutPasteMessage"],"mappings":"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"}